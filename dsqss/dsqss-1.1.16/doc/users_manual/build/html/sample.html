

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>計算例 &mdash; DSQSS  1.1.16 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.1.16',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/sam3.ico"/>
    <link rel="top" title="DSQSS  1.1.16 documentation" href="index.html" />
    <link rel="next" title="Q&amp;A" href="qa.html" />
    <link rel="prev" title="実行方法" href="exe_method.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="qa.html" title="Q&amp;A"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="exe_method.html" title="実行方法"
             accesskey="P">前へ</a> |</li>
        <li><a href="index.html">DSQSS  1.1.16 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">計算例</a><ul>
<li><a class="reference internal" href="#sample-1-s-1-2">sample-1 : S=1/2 ハイゼンベルグモデル</a></li>
<li><a class="reference internal" href="#sample-2">sample-2 : レプリカ交換法を用いた拡張アンサンブル計算(磁場)</a></li>
<li><a class="reference internal" href="#sample-3">sample-3 :  レプリカ交換法を用いた拡張アンサンブル計算(逆温度)</a></li>
<li><a class="reference internal" href="#sample-4-b">sample-4 : 物性研システムBでの利用方法（インタラクティブノード）</a></li>
<li><a class="reference internal" href="#sample-5-b">sample-5 : 物性研システムBでの利用方法（バッチジョブとして実行する場合）</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="exe_method.html"
                        title="前の章へ">実行方法</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="qa.html"
                        title="次の章へ">Q&amp;A</a></p>
  <h3>このページ</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/sample.txt"
           rel="nofollow">ソースコードを表示</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>クイック検索</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    モジュール、クラス、または関数名を入力してください
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="id1">
<h1>計算例<a class="headerlink" href="#id1" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="section" id="sample-1-s-1-2">
<h2>sample-1 : S=1/2 ハイゼンベルグモデル<a class="headerlink" href="#sample-1-s-1-2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>もっとも簡単な例として、S=1/2 のスピン２個だけからなる系を考えます。 以下は、これらが反強磁性的に結合していて、磁場がかかっていない場合の計算例です。 アルゴリズムファイル（ワームの散乱確率や、バーテックス密度を含む）や 格子ファイル（単位胞の情報を含む）を直接編集して、dla 単体で 実行することも可能ですが、ここでは、hamgen_H, dla_alg, latgene を利用して、 これらのファイルを自動生成して計算する例を示します。 dla.exe, hamgen_H.exe, dla_alg.exe, latgene.exe などの 実行ファイルのあるディレクトリにはパスが通っているとします。 （通っていなければ、パスも併せて指定してください。） 各実行ファイルの関係や入出力ファイルの詳細については、 実行方法ページ を参照。</p>
<dl class="docutils">
<dt>入力ファイル（sample.inp）例:</dt>
<dd><div class="first last highlight-sh"><div class="highlight"><pre><span class="nv">runtype</span> <span class="o">=</span> 0                <span class="c"># シリアル実行</span>

<span class="nv">nmcse</span> <span class="o">=</span> 1000               <span class="c"># 平衡化のために捨てられる初期モンテカルロステップ数</span>
<span class="nv">nmcsd</span> <span class="o">=</span> 1000               <span class="c"># 次setとのあいだの相関を減らすために捨てられる set 間インターバルのステップ数</span>
<span class="nv">nmcs</span>  <span class="o">=</span> 10000              <span class="c"># 各setごとの物理量測定ステップ数</span>
<span class="nv">nset</span>  <span class="o">=</span> 10                 <span class="c"># set数</span>
<span class="nv">seed</span>  <span class="o">=</span> 31415              <span class="c"># 乱数シード</span>
<span class="nv">nvermax</span> <span class="o">=</span> 10000            <span class="c"># バーテックス数上限（実行中に上限に達すると自動終了）</span>
<span class="nv">nsegmax</span> <span class="o">=</span> 10000            <span class="c"># セグメント数上限（実行中に上限に達すると自動終了）</span>

<span class="nv">algfile</span> <span class="o">=</span> algorithm.xml    <span class="c"># アルゴリズムファイル名</span>
<span class="nv">latfile</span> <span class="o">=</span> lattice.xml      <span class="c"># 格子ファイル名</span>
<span class="nv">outfile</span> <span class="o">=</span> sample.log       <span class="c"># 出力ファイル名</span>
</pre></div>
</div>
</dd>
<dt>計算実行例 :</dt>
<dd><div class="first last highlight-sh"><div class="highlight"><pre><span class="nv">$ $INSTALL_DIR</span>/hamgen_H 1 -0.5 0.0          <span class="c"># ハミルトニアン生成．パラメータはスピン長（2*S），交換相互作用（J），外部磁場（F）の順</span>
                                            <span class="c"># 長さ２の周期境界１次元系として実行するので，実際の交換相互作用は２倍の -1.0 である．</span>
                                            <span class="c"># また，F は全ハミルトニアンをペアハミルトニアンに分割したときの個々のペアハミルトニアン</span>
                                            <span class="c"># の中での磁場なので，d 次元立方格子の場合は，「通常の」１スピンあたりの磁場は 2dF になる．</span>
<span class="nv">$ $INSTALL_DIR</span>/dla_alg                      <span class="c"># ハミルトニアンから，アルゴリズム生成．</span>
<span class="nv">$ $INSTALL_DIR</span>/lattgene 1 2 1.0             <span class="c"># 格子生成．パラメータは次元（D），サイズ（L），逆温度（\beta）の順．</span>
<span class="nv">$ </span>mpirun -np 1 <span class="nv">$INSTALL_DIR</span>/dla sample.inp  <span class="c"># 並列度１で実行．</span>
</pre></div>
</div>
</dd>
<dt>　サンプルスクリプトの使用例 :</dt>
<dd><div class="first last highlight-sh"><div class="highlight"><pre><span class="nv">$ $INSTALL_DIR</span>/samp/run_test.sh
  <span class="c"># mpi,実行モジュールのパス修正が必要です。</span>
  定義生成ファイルの作成から本計算まで対話形式で実行できます。
</pre></div>
</div>
</dd>
<dt>出力ファイル（sample.log.000）例:</dt>
<dd><div class="first last highlight-sh"><div class="highlight"><pre>C This is DSQSS ver.1.1

P <span class="nv">D</span>       <span class="o">=</span>            1                         <span class="c"># 次元</span>
P <span class="nv">L</span>       <span class="o">=</span>            2                         <span class="c"># １辺の長さ</span>
P <span class="nv">BETA</span>    <span class="o">=</span>       1.0000000000000000             <span class="c"># 逆温度</span>
P <span class="nv">NSET</span>    <span class="o">=</span>           10                         <span class="c"># セット数</span>
P <span class="nv">NMCSE</span>   <span class="o">=</span>         1000                         <span class="c"># 平衡化ステップ数</span>
P <span class="nv">NMCSD</span>   <span class="o">=</span>         1000                         <span class="c"># セット間インターバル</span>
P <span class="nv">NMCS</span>    <span class="o">=</span>        10000                         <span class="c"># 測定ステップ数</span>
P <span class="nv">SEED</span>    <span class="o">=</span>        31415                         <span class="c"># 乱数シード</span>
P <span class="nv">NSEGMAX</span> <span class="o">=</span>        10000                         <span class="c"># 最大セグメント数</span>
P <span class="nv">NVERMAX</span> <span class="o">=</span>        10000                         <span class="c"># 最大バーテックス数</span>
P <span class="nv">NCYC</span>    <span class="o">=</span>            2                         <span class="c"># １ステップあたりのワームサイクル数（プログラムが決定）</span>
P <span class="nv">ALGFILE</span> <span class="o">=</span> algorithm.xml                        <span class="c"># アルゴリズムファイル名</span>
P <span class="nv">LATFILE</span> <span class="o">=</span> lattice.xml                          <span class="c"># 格子ファイル名</span>
P <span class="nv">OUTFILE</span> <span class="o">=</span> sample.log.000                       <span class="c"># 出力ファイル名</span>
R <span class="nv">anv</span>    <span class="o">=</span> 7.5180000000e-02 7.2092533132e-04     <span class="c"># 物理量（R &quot;ラベル&quot; = &quot;平均値&quot; &quot;統計誤差&quot;）</span>
R <span class="nv">ene</span>    <span class="o">=</span> -1.1287250000e-01 1.1319872521e-03
R <span class="nv">spe</span>    <span class="o">=</span> 1.2403653237e-01 1.1809645533e-03
R <span class="nv">len</span>    <span class="o">=</span> 1.2023753000e+00 6.6838265039e-04
R <span class="nv">xmx</span>    <span class="o">=</span> 3.0059382501e-01 1.6709566260e-04
R <span class="nv">amzu</span>   <span class="o">=</span> 4.9500000000e-04 1.0936800771e-03
R <span class="nv">bmzu</span>   <span class="o">=</span> 4.9500000000e-04 1.0936800771e-03
R <span class="nv">smzu</span>   <span class="o">=</span> 1.7461500000e-01 1.0417413307e-03
R <span class="nv">xmzu</span>   <span class="o">=</span> 1.7461500000e-01 1.0417413307e-03
R <span class="nv">amzs</span>   <span class="o">=</span> 1.6500000000e-04 1.0586167599e-03
R <span class="nv">bmzs</span>   <span class="o">=</span> -1.9144707385e-04 9.9337993655e-04
R <span class="nv">smzs</span>   <span class="o">=</span> 3.2538500000e-01 1.0417413307e-03
R <span class="nv">xmzs</span>   <span class="o">=</span> 3.0049234531e-01 9.0849325770e-04
I <span class="o">[</span>the maximum number of segments<span class="o">]</span>          <span class="o">=</span> 17    <span class="c"># 実際の最大セグメント数</span>
I <span class="o">[</span>the maximum number of vertices<span class="o">]</span>          <span class="o">=</span> 10    <span class="c"># 実際の最大バーテックス数</span>
I <span class="o">[</span>the maximum number of reg. vertex info.<span class="o">]</span> <span class="o">=</span> 3
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="sample-2">
<h2>sample-2 : レプリカ交換法を用いた拡張アンサンブル計算(磁場)<a class="headerlink" href="#sample-2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>DSQSSでは、磁場と逆温度のパラメータを対象としレプリカ交換法を用いた拡張アンサンブル計算が可能です。
sample-2では磁場をパラメータとしたレプリカ交換法を用いた拡張アンサンブル計算の設定、計算方法を示します。レプリカ数8、磁場は0.4から0.02間隔、最大交換数100の系を例にします。
各レプリカ[0-7]において、[0.4,0.42,0.44,0.44・・・0.54]が磁場の初期値としてセットされます。</p>
<p>計算に先立って、アルゴリズム定義ファイル、格子定義ファイルを生成します。各レプリカによって磁場の初期値が異なるため、磁場の値に対応するアルゴリズム定義ファイルを生成する必要があります。各磁場値にて生成されたアルゴリズム定義ファイルalgorithm.xmlをレプリカ番号.xmlの名前で保存してください。また、レプリカ数分のアルゴリズム定義ファイルの他にダミーのアルゴリズムファイル定義が必要になります。入力ファイルの変数algfile(デフォルトはalgorthm.xml)で指定されたファイルを用意してください。</p>
<dl class="docutils">
<dt>　定義ファイル生成例 :</dt>
<dd><div class="first last highlight-sh"><div class="highlight"><pre><span class="nv">$ $INSTALL_DIR</span>/bin/lattgene 1 4 0.1
  <span class="c"># === レプリカ０ ===</span>
<span class="nv">$ $INSTALL_DIR</span>/bin/hamgen_H 1 1.0 0.4
<span class="nv">$ $INSTALL_DIR</span>/bin/dla_alg
<span class="nv">$ </span>mv algorithm.xml 0.xml

  <span class="c"># === レプリカ１ ===</span>
<span class="nv">$ $INSTALL_DIR</span>/bin/hamgen_H 1 1.0 0.42
<span class="nv">$ $INSTALL_DIR</span>/bin/dla_alg
<span class="nv">$ </span>mv algorithm.xml 1.xml
     .
     .
  <span class="c"># === レプリカ７ ===</span>
<span class="nv">$ $INSTALL_DIR</span>/bin/exact_H 1 1.0 0.54
<span class="nv">$ $INSTALL_DIR</span>/bin/dla_alg
<span class="nv">$ </span>mv algorithm.xml 7.xml

  <span class="c"># === ダミーファイルの作成 ===</span>
<span class="nv">$ </span>cp 0.xml algorithm.xml<span class="o">(</span>0.xmlは任意<span class="o">)</span>
</pre></div>
</div>
</dd>
</dl>
<p>次に、計算制御パラメータの <tt class="docutils literal"><span class="pre">runtype</span></tt> , <tt class="docutils literal"><span class="pre">nset</span></tt> , <tt class="docutils literal"><span class="pre">nrep</span></tt> , <tt class="docutils literal"><span class="pre">vf</span></tt> , <tt class="docutils literal"><span class="pre">df</span></tt> を修正します。</p>
<dl class="docutils">
<dt>　入力ファイル例 :</dt>
<dd><div class="first last highlight-bash"><div class="highlight"><pre><span class="c"># ==== 入力ファイル例  qmc.inp  ====</span>
<span class="c"># == RUNTYPE ==</span>
<span class="nv">runtype</span> <span class="o">=</span> 1 <span class="c">#磁場によるレプリカ交換計算</span>

<span class="c"># == PARAMETER ==</span>
<span class="nv">nmcse</span>   <span class="o">=</span> 10
<span class="nv">nmcsd</span>   <span class="o">=</span> 100
<span class="nv">nmcs</span>    <span class="o">=</span> 500
<span class="nv">nset</span>    <span class="o">=</span> 100    <span class="c">#最大交換数(交換判定回数)</span>
<span class="nv">seed</span>    <span class="o">=</span> 71314416
<span class="nv">nrep</span>    <span class="o">=</span>   8    <span class="c">#レプリカ数</span>
<span class="nv">vf</span>      <span class="o">=</span> 0.4    <span class="c"># 磁場の最小値</span>
<span class="nv">df</span>      <span class="o">=</span> 0.02   <span class="c"># 各レプリカの磁場の間隔</span>
<span class="nv">nvermax</span> <span class="o">=</span> 10000
<span class="nv">nsegmax</span> <span class="o">=</span> 10000

<span class="c"># == OUTPUT_FILE ==</span>
<span class="nv">outfile</span> <span class="o">=</span> qmc.log
</pre></div>
</div>
</dd>
</dl>
<p>レプリカ数＝MPI並列数として、計算を実行してください。</p>
<dl class="docutils">
<dt>　計算実行例 :</dt>
<dd><div class="first last highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>mpirun -np 8 <span class="nv">$INSTALL_DIR</span>/dla qmc.inp
   <span class="c"># qmc.log.000-007が生成されます。</span>
</pre></div>
</div>
</dd>
<dt>　サンプルスクリプトの使用例 :</dt>
<dd><div class="first last highlight-sh"><div class="highlight"><pre><span class="nv">$ $INSTALL_DIR</span>/samp/run_test.sh
  <span class="c"># mpi,実行モジュールのパス修正が必要です。</span>
  定義生成ファイルの作成から本計算まで対話形式で実行できます。
</pre></div>
</div>
</dd>
<dt>　計算結果例 <span class="classifier-delimiter">:</span> <span class="classifier">qmc.log.002</span></dt>
<dd><div class="first last highlight-sh"><div class="highlight"><pre>C This is DSQSS ver.1.1

P <span class="nv">D</span>       <span class="o">=</span>            1
P <span class="nv">L</span>       <span class="o">=</span>            4
P <span class="nv">BETA</span>    <span class="o">=</span>       0.1000000000000000
P <span class="nv">NSET</span>    <span class="o">=</span>          100
P <span class="nv">NMCSE</span>   <span class="o">=</span>           10
P <span class="nv">NMCSD</span>   <span class="o">=</span>          100
P <span class="nv">NMCS</span>    <span class="o">=</span>          500
P <span class="nv">SEED</span>    <span class="o">=</span>     71314416
P <span class="nv">NSEGMAX</span> <span class="o">=</span>        10000
P <span class="nv">NVERMAX</span> <span class="o">=</span>        10000
P <span class="nv">NCYC</span>    <span class="o">=</span>            4
P <span class="nv">ALGFILE</span> <span class="o">=</span> algorithm.xml
P <span class="nv">LATFILE</span> <span class="o">=</span> lattice.xml
P <span class="nv">OUTFILE</span> <span class="o">=</span> qmc.log.002
R <span class="nv">anv</span>    <span class="o">=</span> 1.1500000000e-03 1.1135075168e-04
R <span class="nv">ene</span>    <span class="o">=</span> -1.2234756810e-01 2.7178997390e-03
R <span class="nv">spe</span>    <span class="o">=</span> 1.3032337345e-02 1.2234719739e-04
R <span class="nv">len</span>    <span class="o">=</span> 1.0466299052e-01 7.1219677615e-05
R <span class="nv">xmx</span>    <span class="o">=</span> 2.6165747630e-01 1.7804919404e-04
R <span class="nv">amzu</span>   <span class="o">=</span> 5.1245000000e-02 1.2152959277e-03
R <span class="nv">bmzu</span>   <span class="o">=</span> 5.1245000000e-02 1.2152959277e-03
R <span class="nv">smzu</span>   <span class="o">=</span> 2.6935500000e-01 1.4698707254e-03
R <span class="nv">xmzu</span>   <span class="o">=</span> 2.6935500000e-01 1.4698707254e-03
R <span class="nv">amzs</span>   <span class="o">=</span> -2.5350000000e-03 1.1876097504e-03
R <span class="nv">bmzs</span>   <span class="o">=</span> -2.6581629401e-03 1.1902119933e-03
R <span class="nv">smzs</span>   <span class="o">=</span> 2.3599500000e-01 1.3198847325e-03
R <span class="nv">xmzs</span>   <span class="o">=</span> 2.3551502705e-01 1.3173450648e-03
I <span class="o">[</span>the maximum number of segments<span class="o">]</span>          <span class="o">=</span> 13
I <span class="o">[</span>the maximum number of vertices<span class="o">]</span>          <span class="o">=</span> 9
I <span class="o">[</span>the maximum number of reg. vertex info.<span class="o">]</span> <span class="o">=</span> 3
I <span class="o">[</span>the index of replica exchange <span class="o">]</span>         <span class="o">=</span> 5
</pre></div>
</div>
</dd>
</dl>
<p>計算結果ファイルqmc.log.002は、プロセサー2が最終的に担当するレプリカの計算結果を出力します。
ファイル最後のI [the index of replica exchange ] の行にある数値（ここでは5）が、最初に設定したレプリカの認識番号です。すなわち、この出力ファイルはレプリカ番号5（磁場0.5)の計算結果になります。概念図を次にしめします。</p>
<img alt="_images/replica_fig2.png" src="_images/replica_fig2.png" />
</div>
<div class="section" id="sample-3">
<h2>sample-3 :  レプリカ交換法を用いた拡張アンサンブル計算(逆温度)<a class="headerlink" href="#sample-3" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>sample-3では逆温度をパラメータとしたレプリカ交換法を用いた拡張アンサンブル計算の設定、計算方法を示します。レプリカ数8、逆温度は0.1から0.12間隔、最大交換数100の系を例にします。
各レプリカ[0-7]において、[0.1,0.22,0.34,0.46・・・0.94]が逆温度の初期値としてセットされます。</p>
<p>計算に先立って、アルゴリズム定義ファイル、格子定義ファイルを生成します。
詳しくは、「実行手順」の「実行方法」を参照してください。</p>
<dl class="docutils">
<dt>　定義ファイル生成例 :</dt>
<dd><div class="first last highlight-sh"><div class="highlight"><pre><span class="nv">$ $INSTALL_DIR</span>/hamgen_H 1 1.0 0.4
<span class="nv">$ $INSTALL_DIR</span>/dla_alg
     <span class="c"># algorithm.xmlが生成されます。</span>
<span class="nv">$ $INSTALL_DIR</span>/lattgene 1 4 0.1<span class="o">(</span>注<span class="o">)</span>
     <span class="c"># (注)Tの値は計算制御ファイルで与えるので、ここでは任意の値で構いません。</span>
     <span class="c"># lattice.xmlが生成されます。</span>
</pre></div>
</div>
</dd>
</dl>
<p>各レプリカに対応するアルゴリズム定義ファイルを生成する必要があります。各レプリカでの磁場値は等しくアルゴリズム定義ファイルは同じですが、アルゴリズム定義ファイルalgorithm.xmlをレプリカ番号.xmlの名前で保存してください。また、レプリカ数分のアルゴリズム定義ファイルの他にダミーのアルゴリズムファイル定義が必要になります。入力ファイルの変数algfile(デフォルトはalgorthm.xml)で指定されたファイルを用意してください。</p>
<p>次に、計算制御パラメータの <tt class="docutils literal"><span class="pre">runtype</span></tt> , <tt class="docutils literal"><span class="pre">nset</span></tt> , <tt class="docutils literal"><span class="pre">nrep</span></tt> , <tt class="docutils literal"><span class="pre">vb</span></tt> , <tt class="docutils literal"><span class="pre">db</span></tt> を修正します。</p>
<dl class="docutils">
<dt>　入力ファイル例 :</dt>
<dd><div class="first last highlight-bash"><div class="highlight"><pre><span class="c"># ==== 入力ファイル例  qmc.inp  ====</span>
<span class="c"># == RUNTYPE ==</span>
<span class="nv">runtype</span> <span class="o">=</span> 2 <span class="c">#逆温度によるレプリカ交換計算</span>

<span class="c"># == PARAMETER ==</span>
<span class="nv">nmcse</span>   <span class="o">=</span> 10
<span class="nv">nmcsd</span>   <span class="o">=</span> 100
<span class="nv">nmcs</span>    <span class="o">=</span> 500
<span class="nv">nset</span>    <span class="o">=</span> 100    <span class="c">#最大交換数(交換判定回数)</span>
<span class="nv">seed</span>    <span class="o">=</span> 71314416
<span class="nv">nrep</span>    <span class="o">=</span>   8    <span class="c">#レプリカ数</span>
<span class="nv">vb</span>      <span class="o">=</span> 0.1    <span class="c"># 逆温度の最小値</span>
<span class="nv">db</span>      <span class="o">=</span> 0.1    <span class="c"># 各レプリカの逆温度の間隔</span>
<span class="nv">nvermax</span> <span class="o">=</span> 10000
<span class="nv">nsegmax</span> <span class="o">=</span> 10000

<span class="c"># == OUTPUT_FILE ==</span>
<span class="nv">outfile</span> <span class="o">=</span> qmc.log
</pre></div>
</div>
</dd>
</dl>
<p>レプリカ数＝MPI並列数として、計算を実行してください。</p>
<dl class="docutils">
<dt>　計算実行例 :</dt>
<dd><div class="first last highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>mpirun -np 8 <span class="nv">$INSTALL_DIR</span>/dla qmc.inp
   <span class="c"># qmc.log.000-007が生成されます。</span>
</pre></div>
</div>
</dd>
<dt>　サンプルスクリプトの使用例 :</dt>
<dd><div class="first last highlight-sh"><div class="highlight"><pre><span class="nv">$ $INSTALL_DIR</span>/samp/run_test.sh
  <span class="c"># mpi,実行モジュールのパス修正が必要です。</span>
  定義生成ファイルの作成から本計算まで対話形式で実行できます。
</pre></div>
</div>
</dd>
<dt>　計算結果例 <span class="classifier-delimiter">:</span> <span class="classifier">qmc.log.006</span></dt>
<dd><div class="first last highlight-sh"><div class="highlight"><pre>C This is DSQSS ver.1.1

P <span class="nv">D</span>       <span class="o">=</span>            1
P <span class="nv">L</span>       <span class="o">=</span>            4
P <span class="nv">BETA</span>    <span class="o">=</span>       0.3400000000000000
P <span class="nv">NSET</span>    <span class="o">=</span>          100
P <span class="nv">NMCSE</span>   <span class="o">=</span>           10
P <span class="nv">NMCSD</span>   <span class="o">=</span>          100
P <span class="nv">NMCS</span>    <span class="o">=</span>          500
P <span class="nv">SEED</span>    <span class="o">=</span>     71314416
P <span class="nv">NSEGMAX</span> <span class="o">=</span>        10000
P <span class="nv">NVERMAX</span> <span class="o">=</span>        10000
P <span class="nv">NCYC</span>    <span class="o">=</span>            4
P <span class="nv">ALGFILE</span> <span class="o">=</span> algorithm.xml
P <span class="nv">LATFILE</span> <span class="o">=</span> lattice.xml
P <span class="nv">OUTFILE</span> <span class="o">=</span> qmc.log.006
R <span class="nv">anv</span>    <span class="o">=</span> 1.2690000000e-02 3.5009233991e-04
R <span class="nv">ene</span>    <span class="o">=</span> -3.2201857198e-01 2.5566094999e-03
R <span class="nv">spe</span>    <span class="o">=</span> 1.1614163054e-01 4.9001930595e-04
R <span class="nv">len</span>    <span class="o">=</span> 3.8298037722e-01 3.8403676477e-04
R <span class="nv">xmx</span>    <span class="o">=</span> 2.8160321854e-01 2.8237997409e-04
R <span class="nv">amzu</span>   <span class="o">=</span> 1.5311500000e-01 1.2735033799e-03
R <span class="nv">bmzu</span>   <span class="o">=</span> 1.5311500000e-01 1.2735033799e-03
R <span class="nv">smzu</span>   <span class="o">=</span> 3.5586500000e-01 1.7006364673e-03
R <span class="nv">xmzu</span>   <span class="o">=</span> 3.5586500000e-01 1.7006364673e-03
R <span class="nv">amzs</span>   <span class="o">=</span> -1.0150000000e-03 1.0338330903e-03
R <span class="nv">bmzs</span>   <span class="o">=</span> -9.9371314432e-04 1.0226770536e-03
R <span class="nv">smzs</span>   <span class="o">=</span> 1.9676500000e-01 1.1740342044e-03
R <span class="nv">xmzs</span>   <span class="o">=</span> 1.9279519342e-01 1.1575030817e-03
I <span class="o">[</span>the maximum number of segments<span class="o">]</span>          <span class="o">=</span> 21
I <span class="o">[</span>the maximum number of vertices<span class="o">]</span>          <span class="o">=</span> 13
I <span class="o">[</span>the maximum number of reg. vertex info.<span class="o">]</span> <span class="o">=</span> 3
I <span class="o">[</span>the index of replica exchange <span class="o">]</span>         <span class="o">=</span> 2
</pre></div>
</div>
</dd>
</dl>
<p>計算結果ファイルqmc.log.006は、プロセサー6が最終的に担当するレプリカの計算結果を出力します。
ファイル最後のI [the index of replica exchange ] の行にある数値（ここでは2）が、最初に設定したレプリカの認識番号です。すなわち、この出力ファイルはレプリカ番号2（逆温度0.34)の計算結果になります。概念図を次にしめします。</p>
<img alt="_images/replica_fig1.png" src="_images/replica_fig1.png" />
</div>
<div class="section" id="sample-4-b">
<h2>sample-4 : 物性研システムBでの利用方法（インタラクティブノード）<a class="headerlink" href="#sample-4-b" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>DSQSSは物性研スパコンにあらかじめインストールされています。
下記のようにパスを通して使用してください。</p>
<blockquote>
<div><div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/opt/nano/DSQSS/dsqss-1.1.15/bin
</pre></div>
</div>
</div></blockquote>
<p>アルゴリズムや格子の定義方法は通常の方法と同じです。前述の実行サンプルを参照してください。</p>
<dl class="docutils">
<dt>　モンテカルロ計算dlaの実行例 :</dt>
<dd><div class="first last highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>bsub -q i32 -n 1 -W 1 mpijob <span class="nv">$DSQSS_PATH</span>/dla qmc.inp&gt;qmc.log
<span class="c"># 並列数4で実行。詳細情報はシステムBの利用マニュアルを参照してください。</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="sample-5-b">
<h2>sample-5 : 物性研システムBでの利用方法（バッチジョブとして実行する場合）<a class="headerlink" href="#sample-5-b" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>システムBでキューを用いてバッチ処理をおこなう場合は、次のようなbsubスクリプトを作成し、bsubに投入してください。</p>
<dl class="docutils">
<dt>　run.sh :B1キューを用いて4並列計算をおこなう場合の例</dt>
<dd><div class="first highlight-sh"><div class="highlight"><pre><span class="c">#!/bin/bash</span>

<span class="c">#bsub -q B1</span>
<span class="c">#bsub -n 1</span>
<span class="c">#bsub -w 1</span>

<span class="c">#bsub -J test</span>
<span class="c">#bsub -o test.log</span>
<span class="c">#bsub -N</span>
<span class="c">#bsub -B</span>

mpijob /opt/nano/DSQSS/dsqss-1.1.15/bin/dla qmc.inp
</pre></div>
</div>
<div class="last highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>bsub &lt; run.sh
</pre></div>
</div>
</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="qa.html" title="Q&amp;A"
             >次へ</a> |</li>
        <li class="right" >
          <a href="exe_method.html" title="実行方法"
             >前へ</a> |</li>
        <li><a href="index.html">DSQSS  1.1.16 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, K.Sakakura.
      最終更新: Mar 24, 2014
      このドキュメントは <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3 で生成しました。
    </div>
  </body>
</html>